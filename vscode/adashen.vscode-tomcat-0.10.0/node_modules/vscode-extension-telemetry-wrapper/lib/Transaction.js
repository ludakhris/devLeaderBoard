"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const uuid = require("uuid");
class Transaction {
    constructor(action) {
        this.customMeasures = {};
        this.customProperties = {};
        this.id = uuid.v4();
        this.action = action;
    }
    getCustomEvent() {
        const ret = {};
        ret.measures = Object.assign({}, this.customMeasures, { duration: (this.startAt && this.stopAt) ? this.stopAt.getTime() - this.startAt.getTime() : undefined });
        ret.properties = Object.assign({}, this.customProperties, { transactionId: this.id, action: this.action, startAt: this.startAt, stopAt: this.stopAt });
        return ret;
    }
    end() {
        this.stopAt = new Date();
    }
}
exports.Transaction = Transaction;
//# sourceMappingURL=Transaction.js.map